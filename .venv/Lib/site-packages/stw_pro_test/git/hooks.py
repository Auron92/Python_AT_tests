"""Hooks and pytest setup for work with git."""
import pytest

from stw_pro_test.git.bot import get_git_branch_msg, get_git_head_msg
from stw_pro_test.notifications.messenger import NotificationBot


def pytest_sessionfinish(session: pytest.Session):
    """Add text to bot notification."""
    if session.config.general.getboolean('upload-to-chat', False):
        bot: NotificationBot = session.config.bot
        bot.add_message(get_git_branch_msg(session.config))
        bot.add_message(get_git_head_msg(session.config))
