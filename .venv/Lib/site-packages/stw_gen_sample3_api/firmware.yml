name: sample3
info: Образец для Рассвет-3
modules:
- name: repstub
  info: Ошибки обмена
  types:
  - kind: enum
    info: Ok
    min: 0
    max: 0
    name: repstub.Ok
    values:
    - name: Ok
      value: 0
      info: Ok
    base: uint8_t
  - kind: enum
    info: Error
    min: 0
    max: 23
    name: repstub.Error
    values:
    - name: CmdParamTooMany
      value: 0
      info: много параметров для команды
    - name: CmdNotEnoughData
      value: 1
      info: недостаточно параметров для команды
    - name: CmdBadArg
      value: 2
      info: некорректные параметры команды
    - name: TmUnknown
      value: 3
      info: неизвестное тм-сообщение
    - name: NotImplemented
      value: 4
      info: не реализовано
    - name: NotEnoughMemory
      value: 5
      info: недостаточно памяти
    - name: NonEmptyOnShort
      value: 6
      info: некорректная склейка бубен-сообщения
    - name: BadFirst
      value: 7
      info: некорректная первая часть длинного сообщения
    - name: EmptyOnFirst
      value: 8
      info: присутствует начало сообщения на фоне нового
    - name: MsgTooBig
      value: 9
      info: слишкомдлинное сообщение
    - name: MiddleOnEmpty
      value: 10
      info: присутствует середина сообщения на фоне нового
    - name: MiddleOnShortOrLast
      value: 11
      info: присутствует середина сообщения на фоне короткого
    - name: MiddleExceedsSize
      value: 12
      info: недостаточно памяти для склейки сообщения
    - name: LastOnEmpty
      value: 13
      info: пришел конец а сообщения нет
    - name: LastOnShort
      value: 14
      info: пришел конец а там короткое
    - name: BadLastSize
      value: 15
      info: некорректный размер последнего куска
    - name: BadCrc
      value: 16
      info: некорректное crc
    - name: BadSizeInBuf
      value: 17
      info: некорректный размер в буфере
    - name: BadSizeInBuf2
      value: 18
      info: некорректный размер в буфере2
    - name: ShortOrFirstOnMiddleOrLast
      value: 19
      info: присутствует начало сообщения на фоне нового
    - name: MiddleOrLastOnEmpty
      value: 20
      info: пришла середина или конец а начала нет
    - name: MiddleOnReady
      value: 21
      info: пригла середина на фоне готового сообщения
    - name: PreviousItemIsCorrupted
      value: 22
      info: предыдущее сообщение испорчено
    - name: CmdBadContext
      value: 23
      info: неверный контекст исполнения команды
    base: uint8_t
- name: core.interfaces
  info: Общее для всех интерфейсов
  types:
  - kind: struct
    info: Статистика обмена
    name: core.interfaces.Stats
    fields:
    - name: received
      info: Количество принятых сообщений
      type: uint32_t
    - name: transmitted
      info: Количество отправленных сообщений
      type: uint32_t
    - name: receivedErr
      info: Количество ошибок приёма сообщения
      type: uint32_t
    - name: transmittedErr
      info: Количество ошибок отправки сообщений
      type: uint32_t
  import:
  - repstub
- name: core.time
  info: Информация о времени в приборе
  cmds:
  - info: Задать время
    msg_id: 80349688
    req_id: 0
    rep_id: 69774315
    params:
    - name: system
      info: Системное время (GPS)
      unit: нс
      type: core.time.Gps
    rep:
    - repstub.Error
    - repstub.Ok
    name: setTime
    type_id: 8384537
  - info: Задать дату и время
    msg_id: 3729843582
    req_id: 0
    rep_id: 2169123474
    params:
    - name: system
      info: Дата/время
      type: core.time.DateTime
    rep:
    - repstub.Error
    - repstub.Ok
    name: setDateTime
    type_id: 782461
  - info: Отправить всем приборам команду сохранить время
    msg_id: 3428377028
    req_id: 0
    rep_id: 3488403440
    rep:
    - repstub.Error
    - repstub.Ok
    name: sendSaveTime
    type_id: 856485350
  tms:
  - info: Текущее время
    msg_id: 3222577513
    req_id: 571146076
    rep_id: 1426968522
    params:
    - name: isSync
      info: Наличие синхронизации
      type: bool
    - name: system
      info: Системное время (GPS)
      unit: нс
      type: core.time.Gps
    - name: steady
      info: Непрерывное время
      unit: нс
      type: core.time.Up
    name: now
    type_id: 1016096917
  - info: Текущие дата и время
    msg_id: 2404992450
    req_id: 3040834669
    rep_id: 3258467579
    params:
    - name: system
      info: Дата/время
      type: core.time.DateTime
    name: dateTime
    type_id: 2228391226
  types:
  - kind: synonym
    info: Cекунды
    unit: с
    name: core.time.s8u
    base: uint8_t
  - kind: synonym
    info: Cекунды
    unit: с
    name: core.time.s16u
    base: uint16_t
  - kind: synonym
    info: Cекунды
    unit: с
    name: core.time.s32u
    base: uint32_t
  - kind: synonym
    info: Cекунды
    unit: с
    name: core.time.s64u
    base: uint64_t
  - kind: synonym
    info: Cекунды
    unit: с
    name: core.time.s8i
    base: int8_t
  - kind: synonym
    info: Cекунды
    unit: с
    name: core.time.s16i
    base: int16_t
  - kind: synonym
    info: Cекунды
    unit: с
    name: core.time.s32i
    base: int32_t
  - kind: synonym
    info: Cекунды
    unit: с
    name: core.time.s64i
    base: int64_t
  - kind: synonym
    info: Миллисекунды
    unit: мс
    name: core.time.ms8u
    base: uint8_t
  - kind: synonym
    info: Миллисекунды
    unit: мс
    name: core.time.ms16u
    base: uint16_t
  - kind: synonym
    info: Миллисекунды
    unit: мс
    name: core.time.ms32u
    base: uint32_t
  - kind: synonym
    info: Миллисекунды
    unit: мс
    name: core.time.ms64u
    base: uint64_t
  - kind: synonym
    info: Миллисекунды
    unit: мс
    name: core.time.ms8i
    base: int8_t
  - kind: synonym
    info: Миллисекунды
    unit: мс
    name: core.time.ms16i
    base: int16_t
  - kind: synonym
    info: Миллисекунды
    unit: мс
    name: core.time.ms32i
    base: int32_t
  - kind: synonym
    info: Миллисекунды
    unit: мс
    name: core.time.ms64i
    base: int64_t
  - kind: synonym
    info: Микросекунды
    unit: мкс
    name: core.time.us8u
    base: uint8_t
  - kind: synonym
    info: Микросекунды
    unit: мкс
    name: core.time.us16u
    base: uint16_t
  - kind: synonym
    info: Микросекунды
    unit: мкс
    name: core.time.us32u
    base: uint32_t
  - kind: synonym
    info: Микросекунды
    unit: мкс
    name: core.time.us64u
    base: uint64_t
  - kind: synonym
    info: Микросекунды
    unit: мкс
    name: core.time.us8i
    base: int8_t
  - kind: synonym
    info: Микросекунды
    unit: мкс
    name: core.time.us16i
    base: int16_t
  - kind: synonym
    info: Микросекунды
    unit: мкс
    name: core.time.us32i
    base: int32_t
  - kind: synonym
    info: Микросекунды
    unit: мкс
    name: core.time.us64i
    base: int64_t
  - kind: synonym
    info: Наносекунды
    unit: нс
    name: core.time.ns8u
    base: uint8_t
  - kind: synonym
    info: Наносекунды
    unit: нс
    name: core.time.ns16u
    base: uint16_t
  - kind: synonym
    info: Наносекунды
    unit: нс
    name: core.time.ns32u
    base: uint32_t
  - kind: synonym
    info: Наносекунды
    unit: нс
    name: core.time.ns64u
    base: uint64_t
  - kind: synonym
    info: Наносекунды
    unit: нс
    name: core.time.ns8i
    base: int8_t
  - kind: synonym
    info: Наносекунды
    unit: нс
    name: core.time.ns16i
    base: int16_t
  - kind: synonym
    info: Наносекунды
    unit: нс
    name: core.time.ns32i
    base: int32_t
  - kind: synonym
    info: Наносекунды
    unit: нс
    name: core.time.ns64i
    base: int64_t
  - kind: synonym
    info: Время по шкале GPS
    unit: нс
    name: core.time.Gps
    base: core.time.ns64i
  - kind: synonym
    info: Время от старта прибора
    unit: нс
    name: core.time.Up
    base: core.time.ns64i
  - kind: synonym
    info: Время по шкале Ut1
    unit: нс
    name: core.time.Ut1
    base: core.time.ns64i
  - kind: synonym
    info: Время по шкале ГЛОНАСС
    unit: нс
    name: core.time.Glo
    base: core.time.ns64i
  - kind: synonym
    info: Время по шкале Galileo
    unit: нс
    name: core.time.Gal
    base: core.time.ns64i
  - kind: synonym
    info: Время по шкале Beidou
    unit: нс
    name: core.time.Bdu
    base: core.time.ns64i
  - kind: struct
    info: Время
    name: core.time.Date
    fields:
    - name: year
      info: Год
      type: uint16_t
      min: 1980
    - name: month
      info: месяц
      type: uint8_t
      min: 1
      max: 12
    - name: day
      info: день месяца
      type: uint8_t
      min: 1
      max: 31
  - kind: struct
    info: Время
    name: core.time.DateTime
    fields:
    - name: year
      info: Год
      type: uint16_t
      min: 1980
    - name: month
      info: месяц
      type: uint8_t
      min: 1
      max: 12
    - name: day
      info: день месяца
      type: uint8_t
      min: 1
      max: 31
    - name: hour
      info: час
      type: uint8_t
      max: 23
    - name: minute
      info: минута
      type: uint8_t
      max: 59
    - name: second
      info: секунда
      type: uint8_t
      max: 60
  - kind: optional
    name: core.time.Gps_Opt_
    base: core.time.Gps
  - kind: optional
    name: core.time.s16u_Opt_
    base: core.time.s16u
  import:
  - repstub
- name: core.can
  info: Интерфейс CAN
  cmds:
  - info: Установить активную CAN-шину
    msg_id: 2080911527
    req_id: 0
    rep_id: 468592322
    params:
    - name: activeCan
      info: Активная CAN-шина
      max: 1
      type: core.can.CanBus
    rep:
    - repstub.Error
    - repstub.Ok
    name: setActiveCan
    type_id: 502038057
  - info: Сохранить настройку активной CAN-шины
    msg_id: 497217563
    req_id: 0
    rep_id: 3015197709
    rep:
    - repstub.Error
    - repstub.Ok
    name: saveActiveCan
    type_id: 2074683670
  - info: Получить информацию по CAN-шинам
    msg_id: 1953717288
    req_id: 0
    rep_id: 755604196
    rep:
    - repstub.Error
    - core.can.CanInfo
    name: getCanInfo
    type_id: 1796263179
  - info: Получить информацию об ошибках по CAN-шинам
    msg_id: 1022415950
    req_id: 0
    rep_id: 3033233961
    rep:
    - repstub.Error
    - core.can.CanErrorInfo
    name: getCanErrorInfo
    type_id: 1760320531
  - info: Установить режим работы CAN
    msg_id: 322990817
    req_id: 0
    rep_id: 857915721
    params:
    - name: can
      info: CAN-шина
      max: 1
      type: core.can.CanBus
    - name: mode
      info: Режим работы CAN-драйвера
      max: 1
      type: core.can.Mode
    rep:
    - repstub.Error
    - repstub.Ok
    name: setMode
    type_id: 2383852000
  - info: Установить таймаут восстановления из состояния Bus Off
    msg_id: 2523638424
    req_id: 0
    rep_id: 1294843921
    params:
    - name: can
      info: CAN-шина
      max: 1
      type: core.can.CanBus
    - name: value
      info: Время
      unit: с
      type: core.time.s16u
    rep:
    - repstub.Error
    - repstub.Ok
    name: setRecoveryTimeBusOff
    type_id: 3703132176
  tms:
  - info: Статистика обмена по двум CAN-шинам
    msg_id: 3950211540
    req_id: 3332069387
    rep_id: 2979817629
    params:
    - name: can
      info: Статистика по шинам
      type: core.can.CanInfo
    name: canStats
    type_id: 3332063023
  - info: Статистика ошибок по двум CAN-шинам
    msg_id: 3612741532
    req_id: 29934051
    rep_id: 1993339253
    params:
    - name: can
      info: Статистика ошибок по шинам
      type: core.can.CanErrorInfo
    name: canErrorStats
    type_id: 176234198
  - info: Статистика высокоуровневых ошибок по двум CAN-шинам
    msg_id: 3964294468
    req_id: 3565113226
    rep_id: 2742583068
    params:
    - name: can1
      info: Статистика высокоуровневых ошибок по шине CAN1
      type: core.can.HighLevelStat
    - name: can2
      info: Статистика высокоуровневых ошибок по шине CAN2
      type: core.can.HighLevelStat
    name: highLevelStats
    type_id: 3923527609
  - info: Статистика по каналам Timbrel
    msg_id: 2748582999
    req_id: 4229912913
    rep_id: 2333632967
    params:
    - name: can1Stats
      info: Статистика по каналам Timbrel для CAN1
      type: core.can.ChannelStats
    - name: can2Stats
      info: Статистика по каналам Timbrel для CAN2
      type: core.can.ChannelStats
    name: channelStats
    type_id: 871525651
  - info: Статистика по каналам Timbrel
    msg_id: 2103882165
    req_id: 4202139208
    rep_id: 2372976350
    params:
    - name: can1Stats
      info: Статистика по каналам Timbrel для CAN1
      type: core.can.ChannelStatsExt
    - name: can2Stats
      info: Статистика по каналам Timbrel для CAN2
      type: core.can.ChannelStatsExt
    name: channelStatsExt
    type_id: 3950029590
  - info: Расширенные ошибки
    msg_id: 1477487418
    req_id: 1822229684
    rep_id: 463090722
    params:
    - name: can1
      info: Статистика ошибок для CAN1
      type: core.can.ErrorCounts
    - name: can2
      info: Статистика ошибок для CAN2
      type: core.can.ErrorCounts
    name: extErrors
    type_id: 4072756835
  - info: Статистика детектирования сигнала fault от трансивера
    msg_id: 2368798145
    req_id: 922142185
    rep_id: 1106376063
    params:
    - name: can1
      info: Статистика детектирования сигнала fault от трансивера для CAN1
      type: core.can.FaultTransceiver
    - name: can2
      info: Статистика детектирования сигнала fault от трансивера для CAN2
      type: core.can.FaultTransceiver
    name: transceiverFaultStats
    type_id: 2695361563
  - info: Таймаут восстановления из состояния Bus Off
    msg_id: 1538518710
    req_id: 2707487884
    rep_id: 3597126682
    params:
    - name: can1
      info: Таймаут восстановления из состояния Bus Off для CAN1
      unit: с
      type: core.time.s16u
    - name: can2
      info: Таймаут восстановления из состояния Bus Off для CAN2
      unit: с
      type: core.time.s16u
    name: recoveryTimeBusOff
    type_id: 940048146
  events:
  - info: Данные об ошибке
    msg_id: 3030241274
    params:
    - name: event
      info: Ошибка CAN
      type: core.can.Error
    name: error
    type_id: 2895511734
  - info: Зафиксировано состояние Bus Off
    msg_id: 1957905667
    params:
    - name: event
      info: Шина CAN
      max: 1
      type: core.can.CanBus
    - name: value
      info: Статистика ошибок
      type: core.can.BusOffStats
    name: detectedBusOff
    type_id: 2571839979
  types:
  - kind: enum
    info: Режим работы CAN-драйвера
    min: 0
    max: 1
    name: core.can.Mode
    values:
    - name: Normal
      value: 0
      info: Приём и передача CAN-сообщений включены
    - name: Silent
      value: 1
      info: Передача CAN-сообщений отключена, сообщения принимаются
    base: uint8_t
  - kind: enum
    info: Режим поведения CAN-драйвера при возникновении ошибок
    min: 0
    max: 2
    name: core.can.ErrorMode
    values:
    - name: ActiveError
      value: 0
      info: CAN в состоянии Error Active
    - name: PassiveError
      value: 1
      info: CAN в состоянии Error Passive
    - name: BusOff
      value: 2
      info: CAN в состоянии Bus Off
    base: uint8_t
  - kind: struct
    info: Статистика ошибок CAN
    name: core.can.ErrorStats
    fields:
    - name: errMode
      info: Текущий режим поведения CAN-драйвера при возникновении ошибок
      type: core.can.ErrorMode
      max: 2
    - name: rxErrorCount
      info: Текущее количество ошибок приема CAN-сообщений
      type: uint8_t
    - name: txErrorCount
      info: Текущее количество ошибок передачи CAN-сообщений
      type: uint8_t
    - name: busOffCount
      info: Количество переходов CAN-шины в состояние Bus off
      type: uint32_t
    - name: busOffTime
      info: Время последнего перехода CAN-шины в состояние Bus off
      type: core.time.Gps
      unit: нс
  - kind: struct
    info: Статистика обмена по одной CAN-шине
    name: core.can.Stats
    fields:
    - name: mode
      info: Режим работы CAN-драйвера
      type: core.can.Mode
      max: 1
    - name: stat
      info: Статистика обмена по CAN-шине
      type: core.interfaces.Stats
    - name: sendToTxQueue
      info: Количество отправленных CAN-сообщений в очередь отправки
      type: uint32_t
  - kind: enum
    info: Шина CAN
    min: 0
    max: 1
    name: core.can.CanBus
    values:
    - name: Can1
      value: 0
      info: шина CAN1
    - name: Can2
      value: 1
      info: шина CAN2
    base: uint8_t
  - kind: struct
    info: Статистика обмена по двум CAN-шинам
    name: core.can.CanInfo
    fields:
    - name: can1
      info: Статистика по шине CAN1
      type: core.can.Stats
    - name: can2
      info: Статистика по шине CAN2
      type: core.can.Stats
    - name: activeCan
      info: Активная CAN-шина
      type: core.can.CanBus
      max: 1
  - kind: struct
    info: Статистика ошибок по двум CAN-шинам
    name: core.can.CanErrorInfo
    fields:
    - name: can1
      info: Статистика ошибок на шине CAN1
      type: core.can.ErrorStats
    - name: can2
      info: Статистика ошибок на шине CAN2
      type: core.can.ErrorStats
  - kind: struct
    info: Высокоуровневая статистика обмена по CAN
    name: core.can.HighLevelStat
    fields:
    - name: unsentFrames
      info: Количество неотправленных CAN-сообщений
      type: uint32_t
    - name: unexpectedFrames
      info: Количество несобранных Timbrel сообщений
      type: uint32_t
    - name: corruptedMsgs
      info: Количество сообщений с неправильным DLC или CRC
      type: uint32_t
    - name: notEnoughMemoryMsg
      info: Количество сообщений, не поместившихся в буфер приёма
      type: uint32_t
    - name: abortedQueueFrames
      info: Количество сообщений, не отправленных из-за отсутствия свободных mailbox
      type: uint32_t
  - kind: enum
    info: Ошибка CAN
    min: 0
    max: 0
    name: core.can.Error
    values:
    - name: activeCanLoaded
      value: 0
      info: Loading ActiveCan is fail
    base: uint8_t
  - kind: struct
    info: Статистика по каналу Timbrel
    name: core.can.ChannelStat
    fields:
    - name: receivedMessagesAmount
      info: Количество принятых Timbrel сообщений
      type: uint32_t
    - name: sentMessagesAmount
      info: Количество отправленных Timbrel сообщений
      type: uint32_t
    - name: sendingErrors
      info: Количество ошибок при отправке
      type: uint16_t
    - name: maxReceiveStoreLoad
      info: Максимальная загруженность входящего буффера в байтах
      type: uint16_t
    - name: maxSlicedFramesLoad
      info: Максимальное количество CAN фреймов в рамках одной отправки
      type: uint16_t
  - kind: struct
    info: Статистика по всем каналам Timbrel для одной CAN-шины
    name: core.can.ChannelStats
    fields:
    - name: ctrl
      info: Статистика по каналу Ctrl
      type: core.can.ChannelStat
    - name: reqs
      info: Статистика по каналу ReqRep (запросы)
      type: core.can.ChannelStat
    - name: reps
      info: Статистика по каналу ReqRep (ответы)
      type: core.can.ChannelStat
    - name: tm
      info: Статистика по каналу Tm
      type: core.can.ChannelStat
    - name: stream
      info: Статистика по каналу Stream
      type: core.can.ChannelStat
  - kind: struct
    info: Обновлённая статистика по каналу Timbrel
    name: core.can.ChannelStatExt
    fields:
    - name: receivedMessagesAmount
      info: Количество принятых Timbrel сообщений
      type: uint32_t
    - name: sentMessagesAmount
      info: Количество отправленных Timbrel сообщений
      type: uint32_t
    - name: lostMessagesAmount
      info: Количество потерянных сообщений из-за переполнения очереди
      type: uint16_t
    - name: tooBigMessagesAmount
      info: Количество сообщений некорректного размера согласно протоколу Timbrel
      type: uint16_t
    - name: sendingErrors
      info: Количество ошибок при отправке
      type: uint16_t
    - name: maxSlicedFramesLoad
      info: Максимальное количество CAN фреймов в рамках одной отправки
      type: uint16_t
  - kind: struct
    info: Статистика по всем каналам Timbrel для одной CAN-шины
    name: core.can.ChannelStatsExt
    fields:
    - name: ctrl
      info: Статистика по каналу Ctrl
      type: core.can.ChannelStatExt
    - name: reqs
      info: Статистика по каналу ReqRep (запросы)
      type: core.can.ChannelStatExt
    - name: reps
      info: Статистика по каналу ReqRep (ответы)
      type: core.can.ChannelStatExt
    - name: tm
      info: Статистика по каналу Tm
      type: core.can.ChannelStatExt
    - name: stream
      info: Статистика по каналу Stream
      type: core.can.ChannelStatExt
  - kind: struct
    info: Статистика ошибок bus off
    name: core.can.BusOffStats
    fields:
    - name: errMode
      info: Текущий режим поведения CAN-драйвера при возникновении ошибок
      type: core.can.ErrorMode
      max: 2
    - name: rxErrorCount
      info: Текущее количество ошибок приема CAN-сообщений
      type: uint8_t
    - name: txErrorCount
      info: Текущее количество ошибок передачи CAN-сообщений
      type: uint8_t
    - name: busOffCount
      info: Количество переходов CAN-шины в состояние Bus off
      type: uint32_t
    - name: busOffTimeUp
      info: Непрерывное время последнего перехода CAN-шины в состояние Bus off
      type: core.time.Up
      unit: нс
    - name: busOffTimeGps
      info: Бортовое время последнего перехода CAN-шины в состояние Bus off
      type: core.time.Gps
      unit: нс
  - kind: struct
    info: Количество ошибок по типам
    name: core.can.ErrorCounts
    fields:
    - name: ack
      info: Отсутствие подтверждения приёма сообщения
      type: uint32_t
    - name: bit
      info: Не совпадение реально переданного бита с ожидаемым
      type: uint32_t
    - name: crc
      info: Не совпадение принятого и рассчитанного CRC
      type: uint32_t
    - name: form
      info: Не соответствие формы CAN пакета (положение и/или уровни разделителей,
        уровни ACK и т.д.)
      type: uint32_t
    - name: stuff
      info: Более 5 бит подряд одинаковые
      type: uint32_t
    - name: rxCounter
      info: Счётчик ошибок приёма (REC)
      type: uint32_t
    - name: txCounter
      info: Счётчик ошибок передачи (TEC)
      type: uint32_t
    - name: rxTotal
      info: Общее количество ошибок приёма
      type: uint32_t
    - name: txTotal
      info: Общее количество ошибок передачи
      type: uint32_t
    - name: passive
      info: rxErrorCounter или txErrorCounter превышает 127
      type: uint32_t
    - name: busOff
      info: txErrorCounter превышает 255
      type: uint32_t
  - kind: struct
    info: Статистика детектирования сигнала fault от трансивера
    name: core.can.FaultTransceiver
    fields:
    - name: faultTime
      info: Бортовое время последнего детектирования сигнала fault от трансивера
      type: core.time.Gps
      unit: нс
    - name: faultCount
      info: Общее количество fault сигналов от трансивера
      type: uint32_t
  import:
  - core.interfaces
  - core.time
  - repstub
- name: core.frm
  info: Перепрошивка
  cmds:
  - info: Инициировать приём нового ПО
    msg_id: 2111873259
    req_id: 0
    rep_id: 3600756933
    params:
    - name: size
      info: Размер нового ПО
      type: uint32_t
    rep:
    - repstub.Error
    - repstub.Ok
    name: init
    type_id: 2096520749
  - info: Закончить приём нового ПО
    msg_id: 2812363728
    req_id: 0
    rep_id: 3581240338
    params:
    - name: size
      info: Размер нового ПО
      type: uint32_t
    - name: crc
      info: Контрольная сумма нового ПО
      type: uint32_t
    rep:
    - repstub.Error
    - repstub.Ok
    name: finish
    type_id: 3479665276
  - info: Отменить приём нового ПО
    msg_id: 2596187829
    req_id: 0
    rep_id: 3984941663
    rep:
    - repstub.Error
    - repstub.Ok
    name: abort
    type_id: 1403462330
  - info: Блок данных нового ПО
    msg_id: 932505418
    req_id: 0
    rep_id: 2345124252
    params:
    - name: offset
      info: Смещение блока данных
      type: uint32_t
    - name: size
      info: Действительный размер блока данных
      type: uint32_t
    - name: data
      info: Данные
      type: core.frm.Data
    rep:
    - repstub.Error
    - repstub.Ok
    name: sendData
    type_id: 3016321175
  - info: Обновить ПО
    msg_id: 4005976475
    req_id: 0
    rep_id: 2909641180
    rep:
    - repstub.Error
    - repstub.Ok
    name: burn
    type_id: 1428709444
  - info: Переключить активную область приёма нового ПО
    msg_id: 2045445220
    req_id: 0
    rep_id: 1498250950
    params:
    - name: bank
      info: Идентификатор области приёма ПО
      type: uint8_t
    rep:
    - repstub.Error
    - repstub.Ok
    name: switchBank
    type_id: 1223733266
  - info: Перезапустить ПО и остаться в загрузчике
    msg_id: 427260567
    req_id: 0
    rep_id: 62334619
    rep:
    - repstub.Error
    - repstub.Ok
    name: resetInBoot
    type_id: 3107992962
  - info: Рассчитать CRC загруженной части прошивки
    msg_id: 3214781821
    req_id: 0
    rep_id: 2845293001
    rep:
    - repstub.Error
    - core.frm.CrcInfo
    name: calcCrc
    type_id: 4243740441
  tms:
  - info: Статус загрузки прошивки
    msg_id: 4234726868
    req_id: 540676386
    rep_id: 1463624116
    params:
    - name: bank
      info: Идентификатор активной области приёма ПО
      type: uint8_t
    - name: uploadedSize
      info: Размер загруженной части прошивки
      unit: байт
      type: uint32_t
    - name: expectedSize
      info: Ожидаемый размер прошивки
      unit: байт
      type: uint32_t
    name: status
    type_id: 1630479773
  - info: Информация о модуле перепрошивки
    msg_id: 1880978888
    req_id: 1207833621
    rep_id: 821634179
    params:
    - name: bankCount
      info: Количество областей приёма ПО
      type: uint8_t
    - name: maxSize
      info: Максимальный размер прошивки
      unit: байт
      type: uint32_t
    - name: stage
      info: Этап загрузки прошивки
      max: 3
      type: core.frm.Stage
    name: info
    type_id: 2777716379
  - info: Статус прожига прошивки
    msg_id: 3461637984
    req_id: 3722524710
    rep_id: 2867202224
    params:
    - name: value
      type: core.frm.BurnEvents_Opt_
    name: burnStatus
    type_id: 998420911
  events:
  - info: Событие прожига прошивки
    msg_id: 3872609590
    params:
    - name: event
      info: События прожига прошивки
      max: 5
      type: core.frm.BurnEvents
    name: burnEvents
    type_id: 259039592
  types:
  - kind: array
    info: Блок данных нового ПО
    count: 128
    name: core.frm.Data
    base: uint8_t
  - kind: struct
    info: Информация о контрольной сумме
    name: core.frm.CrcInfo
    fields:
    - name: size
      info: Размер загруженной части прошивки
      type: uint32_t
      unit: байт
    - name: crc
      info: Контрольная сумма загруженной прошивки
      type: uint32_t
  - kind: enum
    info: События прожига прошивки
    min: 0
    max: 5
    name: core.frm.BurnEvents
    values:
    - name: UnknownError
      value: 0
      info: Неизвестная ошибка
    - name: SuccessBurnFirmware
      value: 1
      info: Прошивание прошло успешно
    - name: FirmwareNotReceived
      value: 2
      info: Прошивка не была получена
    - name: WrongCheckSum
      value: 3
      info: Неверная контрольная сумма
    - name: FlashError
      value: 4
      info: Ошибка чтения или записи флеш-памяти
    - name: ParamsSaveError
      value: 5
      info: Не удалось сохранить параметры загрузчика в MRAM
    base: uint8_t
  - kind: enum
    info: Этапы загрузки файла прошивки
    min: 0
    max: 3
    name: core.frm.Stage
    values:
    - name: Idle
      value: 0
      info: Нет активного процесса
    - name: Receiving
      value: 1
      info: Идёт загрузка файла прошивки
    - name: Received
      value: 2
      info: Прошивка загружена во временную область
    - name: Aborted
      value: 3
      info: Загрузка файла прошивки была прервана
    base: uint8_t
  - kind: optional
    name: core.frm.BurnEvents_Opt_
    base: core.frm.BurnEvents
  import:
  - repstub
- name: core.tm
  info: Телеметрия
  cmds:
  - info: Разрешить передачу ТМ-сообщений (восстановление после применения команды
      disable)
    msg_id: 2342766287
    req_id: 0
    rep_id: 975172817
    rep:
    - repstub.Error
    - repstub.Ok
    name: enable
    type_id: 2499895029
  - info: Временно отключает отправку ТМ-сообщений (очередь при этом не очищается)
    msg_id: 2352070910
    req_id: 0
    rep_id: 2870373020
    rep:
    - repstub.Error
    - repstub.Ok
    name: disable
    type_id: 619565391
  - info: Задать целевые периоды отправки ТМ-сообщений
    msg_id: 4273814161
    req_id: 0
    rep_id: 1497218200
    params:
    - name: often
      info: Часто
      min: 50
      unit: мс
      type: core.time.ms16u
    - name: ordinary
      info: Обычно
      min: 50
      unit: мс
      type: core.time.ms16u
    - name: rare
      info: Редко
      min: 50
      unit: мс
      type: core.time.ms16u
    rep:
    - repstub.Error
    - repstub.Ok
    name: setPeriods
    type_id: 1138979304
  - info: Задать частоту отправки ТМ-сообщения
    msg_id: 407587363
    req_id: 0
    rep_id: 2973258671
    params:
    - name: msgId
      info: Идентификатор сообщения
      type: core.tm.MsgId
    - name: freq
      info: Частота отправки ТМ-сообщения
      min: 1
      max: 3
      type: core.tm.Freq
    rep:
    - repstub.Error
    - repstub.Ok
    name: enableMsg
    type_id: 3332964797
  - info: Однократно запросить ТМ-сообщение (устарело, следует пользоваться .reqMsg{})
    msg_id: 488104690
    req_id: 0
    rep_id: 2665441116
    params:
    - name: msgId
      info: Идентификатор сообщения
      type: core.tm.MsgId
    rep:
    - repstub.Error
    - repstub.Ok
    name: reqMsgOnce
    type_id: 1211964330
  - info: Однократно запросить ТМ-сообщение
    msg_id: 2734488589
    req_id: 0
    rep_id: 2956356589
    params:
    - name: msgId
      info: Идентификатор сообщения
      type: core.tm.MsgId
    rep:
    - repstub.Error
    - bytes
    name: reqMsg
    type_id: 245176165
  - info: Удалить из очереди на отправку ТМ-сообщения с заданным msgId
    msg_id: 1975095405
    req_id: 0
    rep_id: 1600410269
    params:
    - name: msgId
      info: Идентификатор сообщения
      type: core.tm.MsgId
    rep:
    - repstub.Error
    - repstub.Ok
    name: disableMsg
    type_id: 2498711807
  - info: Очистить все очереди отправки ТМ-сообщений
    msg_id: 2667231316
    req_id: 0
    rep_id: 144037336
    rep:
    - repstub.Error
    - repstub.Ok
    name: disableAllMsgs
    type_id: 1836412681
  tms:
  - info: Периоды выдачи ТМ-сообщений
    msg_id: 3182733107
    req_id: 42261824
    rep_id: 1971580374
    params:
    - name: often
      info: Период отправки частой ТМ
      unit: мс
      type: core.time.ms16u
    - name: ordinary
      info: Период обычной частой ТМ
      unit: мс
      type: core.time.ms16u
    - name: rare
      info: Период отправки редкой ТМ
      unit: мс
      type: core.time.ms16u
    name: timePeriods
    type_id: 2475067613
  - info: Настройки телеметрии
    msg_id: 2750376497
    req_id: 2461706532
    rep_id: 3854408114
    params:
    - name: settings
      info: настройки ТМ
      type: core.tm.Settings
    name: settings
    type_id: 816609971
  types:
  - kind: synonym
    info: Идентификатор сообщения
    name: core.tm.MsgId
    base: uint32_t
  - kind: enum
    info: Частота отправки ТМ-сообщения
    min: 1
    max: 3
    name: core.tm.Freq
    values:
    - name: Rare
      value: 1
      info: Редко
    - name: Ordinary
      value: 2
      info: Обычно
    - name: Often
      value: 3
      info: Часто
    base: uint8_t
  - kind: struct
    info: настройки ТМ
    name: core.tm.Settings
    fields:
    - name: often
      info: Период отправки частой ТМ
      type: core.time.ms16u
      unit: мс
    - name: ordinary
      info: Период отправки обычной ТМ
      type: core.time.ms16u
      unit: мс
    - name: rare
      info: Период отправки редкой ТМ
      type: core.time.ms16u
      unit: мс
    - name: enabled
      info: Разрешается отправка циклических сообщений
      type: bool
  import:
  - core.time
  - repstub
- name: core.dtc
  info: Интерфейс по работе с неисправностями
  cmds:
  - info: Снятие активной неисправности
    msg_id: 742828035
    req_id: 0
    rep_id: 796291751
    params:
    - name: msgid
      info: Идентификатор неисправности для снятия
      type: core.tm.MsgId
    rep:
    - repstub.Error
    - repstub.Ok
    name: clearActive
    type_id: 1379237317
  - info: Записать неисправности в файл
    msg_id: 1816925282
    req_id: 0
    rep_id: 3969600687
    params:
    - name: severity
      info: Минимальный уровень неисправностей
      max: 2
      type: core.dtc.Severity
    rep:
    - repstub.Error
    - repstub.Ok
    name: flush
    type_id: 574279266
  tms:
  - info: Вектор активных неисправностей
    msg_id: 4257448165
    req_id: 706463169
    rep_id: 1562178903
    params:
    - name: value
      info: Вектор неисправностей
      type: core.dtc.Items
    name: actives
    type_id: 2498562542
  types:
  - kind: struct
    info: Неисправность
    name: core.dtc.Item
    fields:
    - name: msgid
      info: Идентификатор неисправности
      type: core.tm.MsgId
    - name: ts
      info: Время первого возникновения
      type: core.time.Up
      unit: нс
    - name: count
      info: Количество возникших неисправностей
      type: uint32_t
  - kind: vector
    info: Вектор неисправностей
    name: core.dtc.Items
    count: 12
    base: core.dtc.Item
  - kind: enum
    info: Критичность неисправности
    min: 0
    max: 2
    name: core.dtc.Severity
    values:
    - name: Info
      value: 0
      info: Информационные
    - name: Warning
      value: 1
      info: Предупреждения
    - name: Error
      value: 2
      info: Ошибки
    base: uint8_t
  import:
  - core.time
  - core.tm
  - repstub
- name: core.sw
  info: Программные функции
  cmds:
  - info: Перезагрузить прибор
    msg_id: 2637245084
    req_id: 0
    rep_id: 4110164112
    rep:
    - repstub.Error
    - repstub.Ok
    name: reset
    type_id: 3980124890
  - info: Запросить версию ПО прибора
    msg_id: 2477740967
    req_id: 0
    rep_id: 2156693116
    rep:
    - repstub.Error
    - core.sw.Version
    name: getVersion
    type_id: 3833252270
  - info: Запросить серийный номер прибора
    msg_id: 3110741602
    req_id: 0
    rep_id: 4262713390
    rep:
    - repstub.Error
    - core.sw.Serial
    name: getSerial
    type_id: 781024643
  - info: Установить серийный номер прибора
    msg_id: 1212560671
    req_id: 0
    rep_id: 2326598754
    params:
    - name: newSerial
      info: Строка серийного номера
      type: core.sw.Serial
    rep:
    - repstub.Error
    - repstub.Ok
    name: setSerial
    type_id: 2064859847
  - info: Сохранить серийный номер прибора
    msg_id: 4084866926
    req_id: 0
    rep_id: 1135870806
    rep:
    - repstub.Error
    - repstub.Ok
    name: saveSerial
    type_id: 1470505710
  - info: Сбросить счетчик перезагрузок прибора
    msg_id: 1846504339
    req_id: 0
    rep_id: 3098963946
    rep:
    - repstub.Error
    - repstub.Ok
    name: resetRebootCount
    type_id: 3395182913
  - info: Сбросить счетчик общего времени работы прибора
    msg_id: 1109952736
    req_id: 0
    rep_id: 2189807847
    rep:
    - repstub.Error
    - repstub.Ok
    name: resetTotalTime
    type_id: 1698032838
  - info: Установить программный идентификатор платы
    msg_id: 4288594362
    req_id: 0
    rep_id: 1580289889
    params:
    - name: value
      info: Программный идентификатор платы
      type: core.sw.HardwareId
    rep:
    - repstub.Error
    - repstub.Ok
    name: setHardwareId
    type_id: 1911200139
  - info: Сохранить программный идентификатор платы
    msg_id: 914871950
    req_id: 0
    rep_id: 1101612654
    rep:
    - repstub.Error
    - repstub.Ok
    name: saveHardwareId
    type_id: 1036579664
  tms:
  - info: Версия ПО
    msg_id: 2807729658
    req_id: 25467106
    rep_id: 1988339828
    params:
    - name: value
      info: Версия прошивки
      type: core.sw.Version
    name: version
    type_id: 2085641422
  - info: Причина перезагрузки
    msg_id: 1620957376
    req_id: 1977514726
    rep_id: 47794800
    params:
    - name: value
      info: Причина сброса контроллера
      max: 7
      type: core.sw.ResetReason
    name: resetReason
    type_id: 1177406119
  - info: Информация о количестве перезагрузок, времени работы с последнего включения
      и общем времени работы прибора
    msg_id: 75110575
    req_id: 3704933273
    rep_id: 2882796303
    params:
    - name: value
      info: Информация о количестве перезагрузок, времени работы с последнего включения
        и общем времени работы прибора
      type: core.sw.OperatingTimeInfo
    name: operatingTimeInfo
    type_id: 2993789227
  - info: Информация о типе исполняемом ПО
    msg_id: 1789642440
    req_id: 3474695192
    rep_id: 3088880782
    params:
    - name: value
      info: Тип ПО прибора
      max: 3
      type: core.sw.FirmwareType
    name: frmTypeInfo
    type_id: 619452009
  - info: Программный идентификатор платы
    msg_id: 1026055715
    req_id: 3636757686
    rep_id: 2948838432
    params:
    - name: value
      info: Программный идентификатор платы
      type: core.sw.HardwareId
    name: hardwareId
    type_id: 3662091293
  - info: Id ПО
    msg_id: 228690267
    req_id: 839990494
    rep_id: 1159072840
    params:
    - name: value
      info: Строка id ПО прибора
      type: core.sw.FirmwareId
    name: firmwareId
    type_id: 4137143604
  events:
  - info: Прибор перезагрузился
    msg_id: 1188179208
    params:
    - name: event
      info: Причина сброса контроллера
      max: 7
      type: core.sw.ResetReason
    name: bootReport
    type_id: 2313560764
  - info: Данные об ошибке
    msg_id: 2423335328
    params:
    - name: event
      info: Ошибка загрузки времени наработки и количества перезагрузок
      type: core.sw.Error
    name: error
    type_id: 2139579231
  - info: Информация о типе исполняемом ПО
    msg_id: 1202503845
    params:
    - name: event
      info: Тип ПО прибора
      max: 3
      type: core.sw.FirmwareType
    name: frmType
    type_id: 3844933680
  - info: Полная информация об исполняемом ПО
    msg_id: 2675670681
    params:
    - name: event
      info: Тип ПО прибора
      max: 3
      type: core.sw.FirmwareType
    - name: serial
      info: Серийный номер
      type: core.sw.Serial
    - name: fwId
      info: Firmware-id прибора
      type: core.sw.FirmwareId
    - name: version
      info: Версия прошивки
      type: core.sw.Version
    - name: hwId
      info: Hardware-id прибора
      type: core.sw.HardwareId
    name: fwInfo
    type_id: 665614267
  types:
  - kind: struct
    info: Версия прошивки
    name: core.sw.Version
    fields:
    - name: major
      type: uint8_t
    - name: minor
      type: uint8_t
    - name: patch
      type: uint8_t
    - name: build
      type: uint16_t
  - kind: array
    info: Строка серийного номера
    count: 32
    name: core.sw.Serial
    base: char
  - kind: enum
    info: Причина сброса контроллера
    min: 0
    max: 7
    name: core.sw.ResetReason
    values:
    - name: unknown
      value: 0
      info: Unknown
    - name: lowPower
      value: 1
      info: Low-Power
    - name: wwdg
      value: 2
      info: Window watchdog
    - name: iwdg
      value: 3
      info: Independent watchdog
    - name: software
      value: 4
      info: Software
    - name: porPdr
      value: 5
      info: Power-on-Reset / Power-down-Reset
    - name: pinReset
      value: 6
      info: Pin
    - name: brownout
      value: 7
      info: Brown-out
    base: uint8_t
  - kind: struct
    info: Информация о количестве перезагрузок, времени работы с последнего включения
      и общем времени работы прибора
    name: core.sw.OperatingTimeInfo
    fields:
    - name: rebootCount
      info: Количество перезагрузок прибора
      type: uint32_t
    - name: fromRebootTime
      info: Время работы с последнего включения прибора
      type: core.time.ms64u
      unit: мс
    - name: totalTime
      info: Общее время работы прибора
      type: core.time.ms64u
      unit: мс
  - kind: enum
    info: Ошибка загрузки времени наработки и количества перезагрузок
    min: 0
    max: 0
    name: core.sw.Error
    values:
    - name: opTimeInfoLoaded
      value: 0
      info: Loading OpTimeInfo is fail
    base: uint8_t
  - kind: enum
    info: Тип ПО прибора
    min: 0
    max: 3
    name: core.sw.FirmwareType
    values:
    - name: Boot
      value: 0
      info: Загрузчик
    - name: Boot4Boot
      value: 1
      info: Загрузчик для загрузчика
    - name: Main
      value: 2
      info: Функциональное ПО
    - name: Service
      value: 3
      info: Сервисное ПО
    base: uint8_t
  - kind: vector
    info: Программный идентификатор платы
    name: core.sw.HardwareId
    count: 16
    base: char
  - kind: vector
    info: Строка id ПО прибора
    name: core.sw.FirmwareId
    count: 32
    base: char
  - kind: bits
    info: Флаги запуска основной прошивки
    name: core.sw.StartupFlags
    fields:
    - name: runWithDefaults
      info: Запуститься с настройками по умолчанию
      size: 1
    base: uint32_t
  - kind: optional
    name: core.sw.Version_Opt_
    base: core.sw.Version
  - kind: optional
    name: core.sw.FirmwareId_Opt_
    base: core.sw.FirmwareId
  import:
  - core.time
  - repstub
- name: core.nodeid2
  info: Идентификатор устройства
  cmds:
  - info: Установить новый Node ID
    msg_id: 3078747638
    req_id: 0
    rep_id: 432808596
    params:
    - name: nodeId
      info: Текущий Node ID
      type: core.nodeid2.NodeId
    - name: newNodeId
      info: Новый Node ID
      type: core.nodeid2.NodeId
    rep:
    - repstub.Error
    - repstub.Ok
    name: set
    type_id: 3973180671
  - info: Установить Node ID по серийному номеру
    msg_id: 1782184322
    req_id: 0
    rep_id: 552953570
    params:
    - name: serialNumber
      info: Серийный номер
      type: core.sw.Serial
    - name: newNodeId
      info: Новый Node ID
      type: core.nodeid2.NodeId
    rep:
    - repstub.Error
    - repstub.Ok
    name: setBySerial
    type_id: 3463270140
  - info: Запросить Node ID по серийному номеру
    msg_id: 1947619019
    req_id: 0
    rep_id: 4008418510
    params:
    - name: serialNumber
      info: Серийный номер
      type: core.sw.Serial
    rep:
    - repstub.Error
    - core.nodeid2.NodeId
    name: getBySerial
    type_id: 4101466608
  - info: Сохранить новый Node ID
    msg_id: 2391566040
    req_id: 0
    rep_id: 1289685621
    rep:
    - repstub.Error
    - repstub.Ok
    name: save
    type_id: 2631756621
  types:
  - kind: synonym
    info: Идентификатор устройства
    name: core.nodeid2.NodeId
    base: uint16_t
  import:
  - core.sw
  - repstub
- name: core.periph3
  info: Общая периферия устройства (типовая схема Рассвет-3)
  cmds:
  - info: Задать пороги для каналов напряжения
    msg_id: 2822070637
    req_id: 0
    rep_id: 2218144340
    params:
    - name: channel
      info: Канал напряжения
      max: 2
      type: core.periph3.VoltageChannels
    - name: value
      info: Значения порогов напряжения
      type: core.periph3.VoltageThreshold
    rep:
    - repstub.Error
    - repstub.Ok
    name: setVoltageThreshold
    type_id: 1928761751
  - info: Задать верхний порог мощности
    msg_id: 542310239
    req_id: 0
    rep_id: 3762708982
    params:
    - name: value
      info: Верхний порог мощности
      unit: мВт
      type: core.periph3.OverPower
    rep:
    - repstub.Error
    - repstub.Ok
    name: setPowerThreshold
    type_id: 2262580025
  tms:
  - info: Служебные напряжения и токи
    msg_id: 4260110819
    req_id: 3319174439
    rep_id: 3000083889
    params:
    - name: uMain
      info: Напряжение на выходе основного преобразователя
      unit: мВ
      type: uint16_t
    - name: uRes
      info: Напряжение на выходе резервного преобразователя
      unit: мВ
      type: uint16_t
    - name: uSum
      info: Напряжение в точке суммирования
      unit: мВ
      type: uint16_t
    - name: iSum
      info: Ток в точке суммирования
      unit: мА
      type: uint16_t
    name: curVoltage
    type_id: 2992907791
  - info: Температуры прибора
    msg_id: 1919804186
    req_id: 4077697439
    rep_id: 2215348489
    params:
    - name: tempBoard
      info: Температура платы
      unit: °C
      type: int8_t
    - name: tempMcu
      info: Температура микроконтроллера
      unit: °C
      type: int8_t
    name: temperature
    type_id: 1439177096
  - info: Текущие пороги напряжения для отслеживания перехода между состояниями (Under<=>Normal<=>Over)
    msg_id: 1525869936
    req_id: 1852161501
    rep_id: 425889099
    params:
    - name: value
      info: Пороги напряжения по всем каналам
      type: core.periph3.ChannelsVoltageThresholds
    name: voltageThresholds
    type_id: 2028836871
  - info: Верхний порог мощности
    msg_id: 4128995213
    req_id: 3123833319
    rep_id: 3442923889
    params:
    - name: value
      info: Верхний порог мощности
      unit: мВт
      type: core.periph3.OverPower
    name: powerThreshold
    type_id: 2877018858
  - info: Опорное напряжение АЦП
    msg_id: 540093218
    req_id: 3393490089
    rep_id: 3175332927
    params:
    - name: value
      type: uint16_t
    name: adcVRef
    type_id: 3057739211
  events:
  - info: Событие преодоления порогов напряжения
    msg_id: 3695440672
    params:
    - name: event
      info: События преодоления порогов напряжения
      max: 2
      type: core.periph3.VoltageEvents
    - name: channel
      info: Канал напряжения
      max: 2
      type: core.periph3.VoltageChannels
    - name: value
      info: Значение напряжения
      type: uint16_t
    name: voltageEvents
    type_id: 2591458665
  - info: Событие преодоления порогов напряжения
    msg_id: 3955050378
    params:
    - name: event
      info: События преодоления порогов мощности
      max: 1
      type: core.periph3.PowerEvents
    - name: value
      info: Текущее значение мощности
      type: uint16_t
    name: powerEvents
    type_id: 3787397640
  - info: Событие преодоления порогов опорным напряжением АЦП
    msg_id: 3632542064
    params:
    - name: event
      info: События преодоления порогов напряжения
      max: 2
      type: core.periph3.VoltageEvents
    - name: value
      info: Значение напряжения
      type: uint16_t
    name: adcVRefEvents
    type_id: 961313653
  cfg:
  - info: Пороги напряжения для отслеживания перехода между состояниями (Under<=>Normal<=>Over)
    msg_id: 1525869936
    params:
    - name: value
      info: Пороги напряжения по всем каналам
      type: core.periph3.ChannelsVoltageThresholds
    name: voltageThresholds
    type_id: 2630955832
  - info: Верхний порог мощности
    msg_id: 1504653420
    params:
    - name: value
      info: Верхний порог мощности
      unit: мВт
      type: core.periph3.OverPower
    name: overPowerThreshold
    type_id: 1833650722
  types:
  - kind: enum
    info: Типы ошибок инициализации периферии
    min: 0
    max: 2
    name: core.periph3.Error
    values:
    - name: critical
      value: 0
      info: Ошибка инициализации критической периферии
    - name: important
      value: 1
      info: Ошибка инициализации важной периферии
    - name: additional
      value: 2
      info: Ошибка инициализации вспомогательной периферии
    base: uint8_t
  - kind: enum
    info: Описание состояний периферии
    min: 0
    max: 5
    name: core.periph3.State
    values:
    - name: NotInitialized
      value: 0
      info: Периферия не инициализируется
    - name: InitializedFailed
      value: 1
      info: Провал при инициализации
    - name: AutoSelfTestFailed
      value: 2
      info: Провал при автоматическом тесте по внутренней логике
    - name: CmdSelfTestFailed
      value: 3
      info: Провал при тесте по команде
    - name: Warning
      value: 4
      info: Предупреждение
    - name: Normal
      value: 5
      info: Периферия работает штатно
    base: uint8_t
  - kind: enum
    info: Режим работы периферии
    min: 0
    max: 2
    name: core.periph3.WorkMode
    values:
    - name: NotUsing
      value: 0
      info: Не инициализировать или игнорировать периферию
    - name: Normal
      value: 1
      info: Использовать периферию по-умолчанию
    - name: Force
      value: 2
      info: Периферия принудительно используются
    base: uint8_t
  - kind: struct
    info: Критическая периферия
    name: core.periph3.Critical
    fields:
    - name: systemClock
      info: Тактирование прибора
      type: core.periph3.State
      max: 5
    - name: systemTimer
      info: Системное время
      type: core.periph3.State
      max: 5
    - name: steadyTimer
      info: Непрерывное время
      type: core.periph3.State
      max: 5
    - name: can1
      info: Интерфейс взаимодействия CAN1
      type: core.periph3.State
      max: 5
    - name: can2
      info: Интерфейс взаимодействия CAN2
      type: core.periph3.State
      max: 5
  - kind: struct
    info: Важная периферия
    name: core.periph3.Important
    fields:
    - name: hseClock
      info: Тактирование прибора от внешнего кварцевого генератора
      type: core.periph3.State
      max: 5
    - name: mramInterface
      info: Интерфейс взаимодействия с MRAM
      type: core.periph3.State
      max: 5
    - name: mram
      info: Модуль памяти MRAM
      type: core.periph3.State
      max: 5
    - name: crc32
      info: Модуль подсчета контрольной суммы
      type: core.periph3.State
      max: 5
  - kind: struct
    info: Вспомогательная периферия
    name: core.periph3.Additional
    fields:
    - name: adc
      info: Модуль АЦП
      type: core.periph3.State
      max: 5
    - name: adcTimer
      info: Таймер для АЦП
      type: core.periph3.State
      max: 5
    - name: tmp117Interface
      info: Интерфейс взаимодействия с температурным датчиком
      type: core.periph3.State
      max: 5
    - name: tmp117
      info: Модуль температурного датчика
      type: core.periph3.State
      max: 5
    - name: syncTimer
      info: Таймер синхронизации времени в режиме master
      type: core.periph3.State
      max: 5
  - kind: struct
    info: Температурные пороги
    name: core.periph3.TempThreshold
    fields:
    - name: overheat
      info: Температура перегрева
      type: int8_t
      unit: °C
    - name: overcool
      info: Температура захолаживания
      type: int8_t
      unit: °C
  - kind: enum
    info: Каналы по напряжению
    min: 0
    max: 2
    name: core.periph3.VoltageChannels
    values:
    - name: Main
      value: 0
      info: Основной канал напряжения
    - name: Res
      value: 1
      info: Резервный канал напряжение
    - name: Sum
      value: 2
      info: Напряжение в точке суммирования
    base: uint8_t
  - kind: struct
    info: Пороги напряжения
    name: core.periph3.VoltageThreshold
    fields:
    - name: over
      info: Верхняя граница
      type: uint16_t
      unit: мВ
    - name: under
      info: Нижняя граница
      type: uint16_t
      unit: мВ
  - kind: struct
    info: Пороги напряжения по всем каналам
    name: core.periph3.ChannelsVoltageThresholds
    fields:
    - name: main
      info: Пороги основного канала напряжения
      type: core.periph3.VoltageThreshold
    - name: res
      info: Пороги резервного канала напряжения
      type: core.periph3.VoltageThreshold
    - name: sum
      info: Пороги в точке суммирования напряжения
      type: core.periph3.VoltageThreshold
  - kind: synonym
    info: Верхний порог мощности
    unit: мВт
    name: core.periph3.OverPower
    base: uint16_t
  - kind: enum
    info: События преодоления порогов напряжения
    min: 0
    max: 2
    name: core.periph3.VoltageEvents
    values:
    - name: Normal
      value: 0
      info: Нормальный уровень напряжения
    - name: Over
      value: 1
      info: Превышение верхнего порога напряжения
    - name: Under
      value: 2
      info: Превышение нижнего порога напряжения
    base: uint8_t
  - kind: enum
    info: События преодоления порогов мощности
    min: 0
    max: 1
    name: core.periph3.PowerEvents
    values:
    - name: Normal
      value: 0
      info: Нормальный уровень мощности
    - name: Over
      value: 1
      info: Превышение верхнего порога мощности
    base: uint8_t
  import:
  - repstub
- name: core.periph.i2c
  info: Типы i2c
  types:
  - kind: struct
    info: Список ошибок I2C
    name: core.periph.i2c.ErrorsI2C
    fields:
    - name: bus
      info: Внешняя ошибка
      type: uint32_t
    - name: ack
      info: Бит ACK
      type: uint32_t
    - name: timeout
      info: Таймаут
      type: uint32_t
    - name: arbitration
      info: Арбитраж
      type: uint32_t
    - name: dma
      info: DMA
      type: uint32_t
    - name: dmaParam
      info: DMA параметры
      type: uint32_t
    - name: overrun
      info: Overrun/Underrun
      type: uint32_t
  - kind: enum
    info: Режим работы I2C
    min: 0
    max: 1
    name: core.periph.i2c.ModeI2C
    values:
    - name: Hw
      value: 0
      info: Аппаратный интерфейс
    - name: Sw
      value: 1
      info: Программный интерфейс
    base: uint8_t
  - kind: struct
    info: Контроль I2C периферии
    name: core.periph.i2c.ControlI2C
    fields:
    - name: mode
      info: Режим работы
      type: core.periph.i2c.ModeI2C
      max: 1
    - name: errors
      info: Ошибки
      type: core.periph.i2c.ErrorsI2C
  import:
  - repstub
- name: core.pkg
  info: Интерфейс прибора
  cmds:
  - info: Выгрузить часть описания интерфейса
    msg_id: 2655395846
    req_id: 0
    rep_id: 3537967629
    params:
    - name: offset
      type: uint16_t
    - name: size
      type: uint16_t
    rep:
    - repstub.Error
    - core.pkg.FixedChunk
    name: getChunk
    type_id: 854938649
  - info: Запрос метаинформации
    msg_id: 1283202554
    req_id: 0
    rep_id: 2140579920
    rep:
    - repstub.Error
    - core.pkg.PackageMeta
    name: getMeta
    type_id: 1168419141
  tms:
  - info: контрольная сумма описания ПО
    msg_id: 2200298736
    req_id: 3181054401
    rep_id: 3399235927
    params:
    - name: size
      type: uint16_t
    - name: hash
      type: bytes
    name: hash
    type_id: 3771940969
  - info: короткая контрольная сумма описания ПО
    msg_id: 3888492648
    req_id: 3128627275
    rep_id: 3447464157
    params:
    - name: hash
      type: bytes
    name: smallHash
    type_id: 4031449859
  types:
  - kind: array
    info: Массив данных
    count: 100
    name: core.pkg.FixedChunkArr
    base: uint8_t
  - kind: array
    info: Массив данных хеша
    count: 12
    name: core.pkg.FixedHashArr
    base: uint8_t
  - kind: struct
    info: Часть описания интерфейса
    name: core.pkg.FixedChunk
    fields:
    - name: offset
      type: uint16_t
    - name: size
      type: uint16_t
    - name: data
      info: Массив данных
      type: core.pkg.FixedChunkArr
  - kind: struct
    info: Метаинформация об интерфейсе
    name: core.pkg.PackageMeta
    fields:
    - name: size
      type: uint16_t
    - name: hash
      info: Массив данных хеша
      type: core.pkg.FixedHashArr
  import:
  - repstub
- name: core.rmtx
  info: rmt
  cmds:
  - info: отложенное исполнение команды
    msg_id: 3699073493
    req_id: 0
    rep_id: 1700955023
    params:
    - name: time
      info: Время по шкале GPS
      unit: нс
      type: core.time.Gps
    - name: cmd
      type: bytes
    rep:
    - repstub.Error
    - repstub.Ok
    name: execDelayed
    type_id: 3499349646
  - info: Периодическое исполнение команды
    msg_id: 3231680919
    req_id: 0
    rep_id: 3718117510
    params:
    - name: msgId
      type: uint32_t
    - name: raw_cmd
      type: bytes
    - name: freq
      info: Частота отправки ТМ-сообщения
      min: 1
      max: 3
      type: core.rmtx.Freq
    rep:
    - repstub.Error
    - repstub.Ok
    name: execPeriodic
    type_id: 743167569
  types:
  - kind: enum
    info: Частота отправки ТМ-сообщения
    min: 1
    max: 3
    name: core.rmtx.Freq
    values:
    - name: Rare
      value: 1
      info: Редко
    - name: Ordinary
      value: 2
      info: Обычно
    - name: Often
      value: 3
      info: Часто
    base: uint8_t
  import:
  - core.time
  - repstub
- name: core.service.types
  info: Основные типы сервисной части ПО
  types:
  - kind: enum
    info: Статус теста
    min: 0
    max: 4
    name: core.service.types.Status
    values:
    - name: Ok
      value: 0
      info: Тест пройден
    - name: NotPerformed
      value: 1
      info: Тест не производился
    - name: WriteError
      value: 2
      info: Ошибка при попытке записи данных
    - name: ReadError
      value: 3
      info: Ошибка при попытке чтения данных
    - name: VerificationError
      value: 4
      info: Ошибка проверки данных
    base: uint8_t
  - kind: enum
    info: Паттерн для теста
    min: 0
    max: 4
    name: core.service.types.Pattern
    values:
    - name: _FF
      value: 0
      info: Паттерн 0xFF
    - name: _AA
      value: 1
      info: Паттерн 0xAA
    - name: _55
      value: 2
      info: Паттерн 0x55
    - name: _00
      value: 3
      info: Паттерн 0x00
    - name: _Counter
      value: 4
      info: Счетчик с фиксированным инкрементом
    base: uint8_t
  - kind: struct
    info: Результат теста
    name: core.service.types.TestResult
    fields:
    - name: _FFRes
      info: Результат теста при использовании паттерна 0xFF
      type: core.service.types.Status
      max: 4
    - name: _AARes
      info: Результат теста при использовании паттерна 0xAA
      type: core.service.types.Status
      max: 4
    - name: _55Res
      info: Результат теста при использовании паттерна 0x55
      type: core.service.types.Status
      max: 4
    - name: _00Res
      info: Результат теста при использовании паттерна 0x00
      type: core.service.types.Status
      max: 4
    - name: _CounterRes
      info: Результат теста при использовании паттерна последовательного счётчика
      type: core.service.types.Status
      max: 4
  - kind: synonym
    info: Результат расчёта CRC32
    name: core.service.types.MemFlashCrc32
    base: uint32_t
  - kind: struct
    info: Результат расчёта CRC32
    name: core.service.types.MemFlashCrc32Result
    fields:
    - name: address
      info: Адрес
      type: uint32_t
    - name: length
      info: Длина
      type: uint32_t
    - name: crc32
      info: Результат расчёта CRC32
      type: core.service.types.MemFlashCrc32
  - kind: struct
    info: Результат последнего частичного теста
    name: core.service.types.PartialTestResult
    fields:
    - name: pattern
      info: Последний запрошенный паттерн тестирования
      type: core.service.types.Pattern
      max: 4
    - name: status
      info: Последний результат частичного теста
      type: core.service.types.Status
      max: 4
  - kind: array
    info: Результат расчёта SHA256
    count: 32
    name: core.service.types.Sha256
    base: uint8_t
  - kind: struct
    name: core.service.types.Sha256Result
    fields:
    - name: address
      info: Адрес
      type: uint32_t
    - name: length
      info: Длина
      type: uint32_t
    - name: sha256
      info: Результат расчёта SHA256
      type: core.service.types.Sha256
  import:
  - repstub
- name: core.service.mram
  info: Сервисные функции работы с последовательной mram
  cmds:
  - info: Начать полный тест (!) НЕБЕЗОПАСНО
    msg_id: 465790266
    req_id: 0
    rep_id: 3312126366
    rep:
    - repstub.Error
    - core.service.types.TestResult
    name: fullTest
    type_id: 272040110
  - info: Начать частичный тест (!) НЕБЕЗОПАСНО согласно указанному паттерну
    msg_id: 1656854258
    req_id: 0
    rep_id: 3674188260
    params:
    - name: value
      info: Паттерн памяти для тестирования
      max: 4
      type: core.service.types.Pattern
    rep:
    - repstub.Error
    - core.service.types.Status
    name: partialTest
    type_id: 888488801
  - info: Начать безопасный тест (!) БЕЗОПАСНО
    msg_id: 276997055
    req_id: 0
    rep_id: 4101898921
    rep:
    - repstub.Error
    - core.service.types.TestResult
    name: safeTest
    type_id: 3173887925
  tms:
  - info: Результат последнего полного теста
    msg_id: 2491291050
    req_id: 2008153784
    rep_id: 11980334
    params:
    - name: value
      info: Последний результат исполнения полного теста
      type: core.service.types.TestResult
    name: fullTestResult
    type_id: 1751153602
  - info: Результат последнего частичного теста
    msg_id: 2541238442
    req_id: 2289556791
    rep_id: 4285590945
    params:
    - name: pattern
      info: Последний результат исполнения частичного теста
      max: 4
      type: core.service.types.Pattern
    - name: status
      info: Последний запрошенный паттерн тестирования
      max: 4
      type: core.service.types.Status
    name: partialTestResult
    type_id: 3117516328
  - info: Результат последнего безопасного теста
    msg_id: 2477481219
    req_id: 1534120118
    rep_id: 746053664
    params:
    - name: value
      info: Последний результат исполнения безопасного теста
      type: core.service.types.TestResult
    name: safeTestResult
    type_id: 660405758
  types: []
  import:
  - core.service.types
  - repstub
- name: core.service.checksum
  info: Проверка контрольной суммы Flash
  cmds:
  - info: Рассчитать CRC32 области памяти
    msg_id: 393667852
    req_id: 0
    rep_id: 1629135797
    params:
    - name: address
      info: Адрес во flash памяти
      type: uint32_t
    - name: length
      info: Размер области памяти
      unit: байт
      type: uint32_t
    rep:
    - repstub.Error
    - core.service.types.MemFlashCrc32
    name: calculate
    type_id: 660043739
  tms:
  - info: Результат последнего расчёта CRC32
    msg_id: 1200333753
    req_id: 2195657469
    rep_id: 4124582507
    params:
    - name: value
      info: Результат последнего расчёта CRC32 Flash памяти
      type: core.service.types.MemFlashCrc32Result
    name: lastResult
    type_id: 2140894412
  types: []
  import:
  - core.service.types
  - repstub
- name: core.sync.can2
  info: Синхронизация времени по интерфейсу CAN
  cmds:
  - info: Включение синхронизации в режиме master
    msg_id: 3334603083
    req_id: 0
    rep_id: 3092198067
    params:
    - name: time
      info: Период синхронизации
      min: 100
      max: 5000
      unit: мс
      type: core.time.ms16u
    rep:
    - repstub.Error
    - repstub.Ok
    name: setMaster
    type_id: 2505316478
  - info: Включение синхронизации в режиме slave
    msg_id: 3248254412
    req_id: 0
    rep_id: 860908300
    params:
    - name: time
      info: Продолжительность валидности времени с момента последней синхронизации
      unit: мс
      type: core.time.ms32u
    rep:
    - repstub.Error
    - repstub.Ok
    name: setSlave
    type_id: 3165130408
  - info: Отключить синхронизацию времени
    msg_id: 4096625637
    req_id: 0
    rep_id: 3899161712
    rep:
    - repstub.Error
    - repstub.Ok
    name: disable
    type_id: 3972297302
  tms:
  - info: Информация о синхронизации времени
    msg_id: 3499887543
    req_id: 3733187431
    rep_id: 2844056561
    params:
    - name: common
      info: Общая статистика
      type: core.sync.can2.Stats
    - name: slave
      info: Статистика синхронизации для slave
      type: core.sync.can2.SlaveStats
    - name: master
      info: Статистика синхронизации для master
      type: core.sync.can2.MasterStats
    name: stats
    type_id: 2904942105
  events:
  - info: Смена режима работы синхронизации
    msg_id: 1798164143
    params:
    - name: event
      info: Режим работы
      max: 2
      type: core.sync.can2.Mode
    - name: reason
      info: Причина смены режима работы
      max: 1
      type: core.sync.can2.Reason
    name: stateChanged
    type_id: 424738621
  - info: Обнаружена ошибка
    msg_id: 3657879660
    params:
    - name: event
      info: Ошибки
      type: core.sync.can2.Error
    - name: nodeId
      info: Нода другого мастера
      type: core.nodeid2.NodeId
    name: error
    type_id: 3716446496
  types:
  - kind: enum
    info: Состояние синхронизации
    min: 0
    max: 1
    name: core.sync.can2.State
    values:
    - name: inactive
      value: 0
      info: Отсутствие синхронизации
    - name: active
      value: 1
      info: Происходит синхронизация
    base: uint8_t
  - kind: enum
    info: Режим работы
    min: 0
    max: 2
    name: core.sync.can2.Mode
    values:
    - name: disabled
      value: 0
      info: Синхронизация отключена
    - name: slave
      value: 1
      info: Slave
    - name: master
      value: 2
      info: Master
    base: uint8_t
  - kind: enum
    info: Причины смены режима работы
    min: 0
    max: 1
    name: core.sync.can2.Reason
    values:
    - name: start
      value: 0
      info: Старт устройства
    - name: cmd
      value: 1
      info: Принудительная смена состояния
    base: uint8_t
  - kind: enum
    info: Ошибки
    min: 0
    max: 0
    name: core.sync.can2.Error
    values:
    - name: othMaster
      value: 0
      info: Обнаружен ещё один мастер
    base: uint8_t
  - kind: struct
    info: Статистика синхронизации
    name: core.sync.can2.Stats
    fields:
    - name: bus
      info: Активная CAN-шина для синхронизации времени
      type: core.can.CanBus
      max: 1
    - name: mode
      info: Режим работы
      type: core.sync.can2.Mode
      max: 2
    - name: savedSysTime
      info: Последнее сохраненное время
      type: core.time.Gps
      unit: нс
    - name: savedSteadyTime
      info: Последнее сохраненное время
      type: core.time.Up
      unit: нс
  - kind: struct
    info: Статистика синхронизации slave
    name: core.sync.can2.SlaveStats
    fields:
    - name: state
      info: Флаг синхронизации времени
      type: core.sync.can2.State
      max: 1
    - name: nodeId
      info: Нода синхронизирующего устройства (валидно лишь при state=active)
      type: core.nodeid2.NodeId
    - name: period
      info: Максимальный период синхронизации, в течение которого сохраняется флаг
        валидности без синхронизации
      type: core.time.ms32u
      unit: мс
    - name: system
      info: Последнее время приема синхросообщения
      type: core.time.Gps
      unit: нс
    - name: steady
      info: Последнее время приема синхросообщения
      type: core.time.Up
      unit: нс
    - name: delta
      info: Последняя величина коррекции времени
      type: core.time.us64i
      unit: мкс
    - name: qtyMsg
      info: Общее количество принятых синхросообщений
      type: uint32_t
    - name: qtyMsgValid
      info: Количество принятых валидных синхросообщений
      type: uint32_t
    - name: qtyMsgInvalid
      info: Количество принятых невалидных синхросообщений
      type: uint32_t
  - kind: struct
    info: Статистика синхронизации master
    name: core.sync.can2.MasterStats
    fields:
    - name: period
      info: Период отправки синхросообщений
      type: core.time.ms16u
      unit: мс
    - name: system
      info: Время последнего отправленного синхросообщения
      type: core.time.Gps
      unit: нс
    - name: steady
      info: Время последнего отправленного синхросообщения
      type: core.time.Up
      unit: нс
    - name: delta
      info: Дельта времени с последней отправки синхросообщения
      type: core.time.ms32u
      unit: мс
    - name: qtyMsg
      info: Общее количество отправленных синхросообщений
      type: uint32_t
    - name: qtyMsgValid
      info: Количество отправленных валидных синхросообщений
      type: uint32_t
    - name: qtyMsgInvalid
      info: Количество ошибок отправки синхросообщений
      type: uint32_t
  - kind: optional
    name: core.sync.can2.MasterStats_Opt_
    base: core.sync.can2.MasterStats
  import:
  - core.can
  - core.time
  - core.nodeid2
  - repstub
- name: core.debug
  info: Функции отладки
  tms:
  - info: Последняя информация о hardfault
    msg_id: 2416395856
    req_id: 151035444
    rep_id: 2114432674
    params:
    - name: value
      info: Данные hard fault
      type: core.debug.HardFaultData
    name: lastHardFault
    type_id: 900466149
  - info: Оставшийся объем стека
    msg_id: 3705934317
    req_id: 2245172690
    rep_id: 4074089796
    params:
    - name: value
      info: Данные стека FreeRTOS
      type: core.debug.StackSizes
    name: stackHighWaterMark
    type_id: 1863452491
  events:
  - info: Данные о ошибке
    msg_id: 4234923831
    params:
    - name: event
      info: Тип ошибки
      max: 1
      type: core.debug.ErrorType
    - name: errorString
      info: Данные assert
      type: uint8_t
    name: assertReport
    type_id: 2841571828
  - info: Данные о ошибке
    msg_id: 1207069556
    params:
    - name: event
      info: Тип ошибки
      max: 1
      type: core.debug.ErrorType
    - name: hardFaultData
      info: Данные о hard fault
      type: core.debug.HardFaultData
    name: hardFaultReport
    type_id: 2800810264
  types:
  - kind: enum
    info: Тип ошибки
    min: 0
    max: 1
    name: core.debug.ErrorType
    values:
    - name: assert
      value: 0
      info: Assert
    - name: hardfault
      value: 1
      info: Hard Fault
    base: uint8_t
  - kind: struct
    info: Регистры с данными о hard fault
    name: core.debug.Stack
    fields:
    - name: r0
      info: ''
      type: uint32_t
    - name: r1
      info: ''
      type: uint32_t
    - name: r2
      info: ''
      type: uint32_t
    - name: r3
      info: ''
      type: uint32_t
    - name: r12
      info: ''
      type: uint32_t
    - name: lr
      info: Адрес возврата последнего перехода
      type: uint32_t
    - name: pc
      info: Адрес текущей выполняемой инструкции
      type: uint32_t
    - name: psr
      info: Общий регистр состояния программы
      type: uint32_t
  - kind: struct
    info: Регистры с данными о hard fault
    name: core.debug.HardFault
    fields:
    - name: cfsr
      info: Configurable Fault Status Register, содержит MMSR (8 байт), BFSR (8 байт)
        and UFSR (16 байт)
      type: uint32_t
    - name: hfsr
      info: Hard Fault Status Register
      type: uint32_t
    - name: dfsr
      info: Debug Fault Status Register
      type: uint32_t
    - name: afsr
      info: Auxiliary Fault Status Register
      type: uint32_t
    - name: mmar
      info: MemManage Fault Address Register
      type: uint32_t
    - name: bfar
      info: Bus Fault Address Register
      type: uint32_t
  - kind: struct
    info: Данные hard fault
    name: core.debug.HardFaultData
    fields:
    - name: count
      info: Счётчик hardfault'ов
      type: uint32_t
    - name: stack
      info: Стек
      type: core.debug.Stack
    - name: hardFault
      info: Регистры с данными о hard fault
      type: core.debug.HardFault
  - kind: struct
    info: Данные стека FreeRTOS
    name: core.debug.StackSize
    fields:
    - name: counter
      info: Счетчик overflow
      type: uint32_t
    - name: allowedSize
      info: Текущий размер стека задачи
      type: uint32_t
  - kind: optional
    info: Размер стека задачи
    name: core.debug.StackSizeOpt
    base: core.debug.StackSize
  - kind: struct
    info: Данные стека FreeRTOS
    name: core.debug.StackSizes
    fields:
    - name: task1
      info: Размер стека задачи 1
      type: core.debug.StackSizeOpt
    - name: task2
      info: Размер стека задачи 2
      type: core.debug.StackSizeOpt
    - name: task3
      info: Размер стека задачи 3
      type: core.debug.StackSizeOpt
    - name: task4
      info: Размер стека задачи 4
      type: core.debug.StackSizeOpt
    - name: task5
      info: Размер стека задачи 5
      type: core.debug.StackSizeOpt
    - name: task6
      info: Размер стека задачи 6
      type: core.debug.StackSizeOpt
  import:
  - repstub
- name: core.heartbeat
  info: Diagnostic Trouble Code (DTC)
  tms:
  - info: Функциональный статус о текущем состоянии прибора
    msg_id: 3029201892
    req_id: 2783637266
    rep_id: 3538804612
    params:
    - name: state
      info: Состояние прибора
      max: 1
      type: core.heartbeat.State
    - name: warnCnt
      info: Накопленное количество предупреждений
      type: uint32_t
    - name: errCnt
      info: Накопленное количество ошибок
      type: uint32_t
    name: status
    type_id: 3361834620
  types:
  - kind: enum
    info: Состояние прибора
    min: 0
    max: 1
    name: core.heartbeat.State
    values:
    - name: Ok
      value: 0
      info: Может выполнять целевую функцию
    - name: Fail
      value: 1
      info: Не может выполнять целевую функцию
    base: uint8_t
  import:
  - repstub
- name: core.metainfo
  info: Интерфейс для работы с мета-информацией
  cmds:
  - info: Найти все мета-данные и обновить информацию о них
    msg_id: 1361343969
    req_id: 0
    rep_id: 2939050451
    rep:
    - repstub.Error
    - repstub.Ok
    name: updateAll
    type_id: 3100594511
  - info: Найти мета-данные в определённой области памяти и обновить информацию о
      них
    msg_id: 4170284523
    req_id: 0
    rep_id: 4164463038
    params:
    - name: value
      info: Область памяти
      max: 2
      type: core.metainfo.Area
    rep:
    - repstub.Error
    - repstub.Ok
    name: updateArea
    type_id: 4249693528
  tms:
  - info: Мета-информация о прошивках
    msg_id: 3373805537
    req_id: 874881194
    rep_id: 1126338620
    params:
    - name: boot
      info: Информация о прошивке загрузчика
      type: core.metainfo.Info_Opt_
    - name: main
      info: Информация о прошивке в основной области
      type: core.metainfo.Info_Opt_
    - name: update
      info: Информация о прошивке в области для загрузки
      type: core.metainfo.Info_Opt_
    name: info
    type_id: 15470581
  - info: Мета-информация о прошивке загрузчика
    msg_id: 1149022322
    req_id: 4278665235
    rep_id: 2281730181
    params:
    - name: value
      type: core.metainfo.Info_Opt_
    name: boot
    type_id: 95181251
  - info: Мета-информация о прошивке в основной области памяти
    msg_id: 3183072210
    req_id: 2316387804
    rep_id: 4246107466
    params:
    - name: value
      type: core.metainfo.Info_Opt_
    name: main
    type_id: 3738510753
  - info: Мета-информация о прошивке в области для загрузки
    msg_id: 3501523892
    req_id: 2254670554
    rep_id: 4049910348
    params:
    - name: value
      type: core.metainfo.Info_Opt_
    name: update
    type_id: 3453557096
  - info: Размер прошивки
    msg_id: 4115741404
    req_id: 576547206
    rep_id: 1431984400
    params:
    - name: value
      type: uint32_t
    name: size
    type_id: 3361658680
  - info: CRC32 прошивки
    msg_id: 2163161918
    req_id: 96504967
    rep_id: 1925692433
    params:
    - name: value
      type: uint32_t
    name: crc
    type_id: 929702096
  events:
  - info: Прошивка повреждена
    msg_id: 221720129
    params:
    - name: event
      info: Сообщение о повреждении прошивки
      max: 2
      type: core.metainfo.Corrupted
    - name: value
      info: Мета-информация
      type: core.metainfo.Info
    name: corrupted
    type_id: 3715622841
  types:
  - kind: optional
    name: core.metainfo.uint32_t_Opt_
    base: uint32_t
  - kind: optional
    name: core.metainfo.bool_Opt_
    base: bool
  - kind: struct
    info: Мета-информация
    name: core.metainfo.Info
    fields:
    - name: size
      info: Размер прошивки
      type: core.metainfo.uint32_t_Opt_
    - name: crc
      info: CRC32 прошивки
      type: core.metainfo.uint32_t_Opt_
    - name: version
      info: Версия прошивки
      type: core.sw.Version_Opt_
    - name: id
      info: Идентификатор прошивки
      type: core.sw.FirmwareId_Opt_
    - name: notCorrupted
      info: Состояние целостности прошивки
      type: core.metainfo.bool_Opt_
  - kind: enum
    info: Сообщение о повреждении прошивки
    min: 0
    max: 2
    name: core.metainfo.Corrupted
    values:
    - name: BootFwCorrupted
      value: 0
      info: Прошивка загрузчика повреждена
    - name: MainFwCorrupted
      value: 1
      info: Прошивка в основной области повреждена
    - name: UpdateFwCorrupted
      value: 2
      info: Прошивка в области для загрузки повреждена
    base: uint8_t
  - kind: enum
    info: Область памяти
    min: 0
    max: 2
    name: core.metainfo.Area
    values:
    - name: Boot
      value: 0
      info: Область памяти загрузчика
    - name: Main
      value: 1
      info: Основная область памяти
    - name: Update
      value: 2
      info: Область памяти для загрузки
    base: uint8_t
  - kind: optional
    name: core.metainfo.Info_Opt_
    base: core.metainfo.Info
  import:
  - core.sw
  - repstub
