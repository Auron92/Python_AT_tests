from dataclasses import dataclass
from typing import TypedDict, Union

from stw_gen_sample3_api.basic_types import *
from stw_py_api_runtime.gen_classes.telemetry.parse import Message as _Message


from stw_gen_sample3_api.types.core.can.error_mode_type import ErrorMode
from stw_gen_sample3_api.types.core.time.gps_type import Gps


@dataclass
class ErrorStats(_Message):

    # Текущий режим поведения CAN-драйвера при возникновении ошибок
    errMode: ErrorMode
    # Текущее количество ошибок приема CAN-сообщений
    rxErrorCount: uint8_t
    # Текущее количество ошибок передачи CAN-сообщений
    txErrorCount: uint8_t
    # Количество переходов CAN-шины в состояние Bus off
    busOffCount: uint32_t
    # Время последнего перехода CAN-шины в состояние Bus off
    busOffTime: Gps


class ErrorStatsDict(TypedDict):

    # Текущий режим поведения CAN-драйвера при возникновении ошибок
    errMode: Union[ErrorMode]

    # Текущее количество ошибок приема CAN-сообщений
    rxErrorCount: Union[uint8_t, int ]

    # Текущее количество ошибок передачи CAN-сообщений
    txErrorCount: Union[uint8_t, int ]

    # Количество переходов CAN-шины в состояние Bus off
    busOffCount: Union[uint32_t, int ]

    # Время последнего перехода CAN-шины в состояние Bus off
    busOffTime: Union[Gps]

