from dataclasses import dataclass
from typing import TypedDict, Union

from stw_gen_sample3_api.basic_types import *
from stw_py_api_runtime.gen_classes.telemetry.parse import Message as _Message


from stw_gen_sample3_api.types.core.nodeid2.node_id_type import NodeId
from stw_gen_sample3_api.types.core.sync.can2.state_type import State
from stw_gen_sample3_api.types.core.time.gps_type import Gps
from stw_gen_sample3_api.types.core.time.ms_3_2u_type import ms32u
from stw_gen_sample3_api.types.core.time.up_type import Up
from stw_gen_sample3_api.types.core.time.us_6_4i_type import us64i


@dataclass
class SlaveStats(_Message):

    # Флаг синхронизации времени
    state: State
    # Нода синхронизирующего устройства (валидно лишь при state=active)
    nodeId: NodeId
    # Максимальный период синхронизации, в течение которого сохраняется флаг валидности без синхронизации
    period: ms32u
    # Последнее время приема синхросообщения
    system: Gps
    # Последнее время приема синхросообщения
    steady: Up
    # Последняя величина коррекции времени
    delta: us64i
    # Общее количество принятых синхросообщений
    qtyMsg: uint32_t
    # Количество принятых валидных синхросообщений
    qtyMsgValid: uint32_t
    # Количество принятых невалидных синхросообщений
    qtyMsgInvalid: uint32_t


class SlaveStatsDict(TypedDict):

    # Флаг синхронизации времени
    state: Union[State]

    # Нода синхронизирующего устройства (валидно лишь при state=active)
    nodeId: Union[NodeId]

    # Максимальный период синхронизации, в течение которого сохраняется флаг валидности без синхронизации
    period: Union[ms32u]

    # Последнее время приема синхросообщения
    system: Union[Gps]

    # Последнее время приема синхросообщения
    steady: Union[Up]

    # Последняя величина коррекции времени
    delta: Union[us64i]

    # Общее количество принятых синхросообщений
    qtyMsg: Union[uint32_t, int ]

    # Количество принятых валидных синхросообщений
    qtyMsgValid: Union[uint32_t, int ]

    # Количество принятых невалидных синхросообщений
    qtyMsgInvalid: Union[uint32_t, int ]

