"""Модуль для запоминания версии SREDA, с которой работает брокер."""
import os

from loguru import logger

version = os.getenv('FORCE_SREDA_VERSION', '0.8.0')
supported_versions = ('0.7.', '0.8.', '0.9.', '0.10.', '0.11.', '0.12.', '0.13.')


def check_sreda_support():
    """Проверка, что текущая версия SREDA поддерживается генератором."""
    for supported_version in supported_versions:
        if version.startswith(supported_version):
            logger.info(f'Connected to SREDA server {version}')
            return
    supported_str = ', '.join([f'{supported}x' for supported in supported_versions])
    raise NotImplementedError(f'SREDA server version not valid! Current {version}, supported: {supported_str}')
