"""Пользовательские методы для работы с файлами и перепрошивкой."""
from pathlib import Path
from typing import Union

from stw_py_api_runtime.file_loading.file_handler import FileHandler
from stw_py_api_runtime.file_loading.loading import LoadMode
from stw_py_api_runtime.sdk.brokers.broker_api import BrokerAPI


def upload_file(  # noqa: WPS211
    device_id: int,
    broker: BrokerAPI,
    file_id: int,
    file_path: Union[str, Path],
    file_name: str = '',
    mode: LoadMode = LoadMode.BATCH,
):
    """Загрузить файл на прибор."""
    handler = FileHandler(
        broker=broker, device_id=device_id, file_id=file_id, file_name=file_name, load_mode=mode,
    )
    handler.upload_file(in_file_path=file_path)


def download_file(  # noqa: WPS211
    device_id: int,
    broker: BrokerAPI,
    file_id: int,
    file_path: Union[str, Path],
    file_name: str = '',
    mode: LoadMode = LoadMode.BATCH,
):
    """Скачать файл с прибора."""
    handler = FileHandler(
        broker=broker, device_id=device_id, file_id=file_id, file_name=file_name, load_mode=mode,
    )
    handler.download_file(out_file_path=file_path)


def update_firmware(
    device_id: int,
    broker: BrokerAPI,
    file_path: Union[str, Path],
    mode: LoadMode = LoadMode.BATCH,
):
    """Обновление прошивки на приборе."""
    raise NotImplementedError


def download_firmware(
    device_id: int,
    broker: BrokerAPI,
    file_path: Union[str, Path],
    mode: LoadMode = LoadMode.BATCH,
):
    """Скачивание прошивки (бинарь) прибора."""
    raise NotImplementedError


def download_firmware_desc(
    device_id: int,
    broker: BrokerAPI,
    file_path: Union[str, Path],
    mode: LoadMode = LoadMode.BATCH,
):
    """Скачивание описания прошивки (zpaq) прибора."""
    raise NotImplementedError


def upload_fpga_firmware(
    device_id: int,
    broker: BrokerAPI,
    file_path: Union[str, Path],
):
    """Перепрошивка ПЛИС прибора."""
    raise NotImplementedError
