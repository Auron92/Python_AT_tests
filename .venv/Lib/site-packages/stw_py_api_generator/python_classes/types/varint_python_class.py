"""Описание типа variant."""
from dataclasses import dataclass, field
from typing import List

from stw_py_api_generator import naming
from stw_py_api_generator.legacy.stw_yaml_gen import TypeVariant
from stw_py_api_generator.python_classes.generic import PythonClass


@dataclass
class VarintPythonClass(PythonClass):
    """Класс для создания типа varint."""

    variable_types: List[str] = field(default_factory=list)

    @classmethod
    def from_yaml_type(cls, orig_type: TypeVariant):   # noqa: WPS210
        """Конструирование из yaml."""
        name = orig_type.name.name
        file_name = naming.upper_to_snake(name)

        imports = set()
        variable_types = []

        return cls(
            name=name,
            custom_file_name=f'{file_name}_type.py',
            imports=imports,
            docstring=orig_type.info or '',
            variable_types=variable_types,
        )
