"""Описание типа array."""
from dataclasses import dataclass

from stw_py_api_generator import naming
from stw_py_api_generator.legacy.stw_yaml_gen import TypeKind, TypeString
from stw_py_api_generator.python_classes.generic import PythonClass


@dataclass
class StringPythonClass(PythonClass):
    """Класс для создания кастомного типа string."""

    bytes_size: int = 32
    base_type: str = ''

    @classmethod
    def from_yaml_type(cls, string_type: TypeString):
        """Конструирование из yaml."""
        name = string_type.name.name
        file_name = naming.upper_to_snake(name)
        bytes_size = string_type.size
        base_type = 'VectorBase' if string_type.base_kind == TypeKind.vector else 'ArrayBase'
        return cls(
            name=name,
            custom_file_name=f'{file_name}_type.py',
            docstring=string_type.info or '',
            bytes_size=bytes_size,
            base_type=base_type,
        )
